(function(e){e.fn.fixPNG=function(){return this.each(function(){var l=e(this).css("backgroundImage");if(l.match(/^url\(["']?(.*\.png)["']?\)$/i)){l=RegExp.$1;e(this).css({backgroundImage:"none",filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true, sizingMethod="+(e(this).css("backgroundRepeat")=="no-repeat"?"crop":"scale")+", src='"+l+"')"}).each(function(){var m=e(this).css("position");if(m!="absolute"&&m!="relative"){e(this).css("position","relative")}})}})};var c,a,h=false,b=new Image,j,k=1,d=/.*/i;var i=null,g=e.browser.msie&&e.browser.version.substr(0,1)==6&&!window.XMLHttpRequest,f=g||(e.browser.msie&&e.browser.version.substr(0,1)==7);e.fn.fancybox=function(m){m=e.extend({},e.fn.fancybox.defaults,m);var u=this;function p(){c=this;a=m;n();return false}function n(){if(h){return}if(e.isFunction(a.callbackOnStart)){a.callbackOnStart()}a.itemArray=[];a.itemCurrent=0;if(m.itemArray.length>0){a.itemArray=m.itemArray}else{var w={};if(!c.rel||c.rel==""){var w={href:c.href,title:c.title};if(e(c).children("img:first").length){w.orig=e(c).children("img:first")}a.itemArray.push(w)}else{var x=e(u).filter("a[rel="+c.rel+"]");var w={};for(var v=0;v<x.length;v++){w={href:x[v].href,title:x[v].title};if(e(x[v]).children("img:first").length){w.orig=e(x[v]).children("img:first")}a.itemArray.push(w)}while(a.itemArray[a.itemCurrent].href!=c.href){a.itemCurrent++}}}if(a.overlayShow){if(g){e("embed, object, select").css("visibility","hidden");e("#fancy_overlay").css("height",e(document).height())}e("#fancy_overlay").css("opacity",a.overlayOpacity).show()}q()}function q(){e("#fancy_right, #fancy_left, #fancy_close, #fancy_title").hide();var v=a.itemArray[a.itemCurrent].href;if(v.match(/#/)){var w=window.location.href.split("#")[0];w=v.replace(w,"");w=w.substr(w.indexOf("#"));o('<div id="fancy_div">'+e(w).html()+"</div>",a.frameWidth,a.frameHeight)}else{if(v.match(d)){b=new Image;b.src=v;if(b.complete){t()}else{e.fn.fancybox.showLoading();e(b).unbind().bind("load",function(){e(".fancy_loading").hide();t()})}}else{if(v.match("iframe")||c.className.indexOf("iframe")>=0){o('<iframe id="fancy_frame" onload="$.fn.fancybox.showIframe()" name="fancy_iframe'+Math.round(Math.random()*1000)+'" frameborder="0" hspace="0" src="'+v+'"></iframe>',a.frameWidth,a.frameHeight)}else{e.get(v,function(x){o('<div id="fancy_ajax">'+x+"</div>",a.frameWidth,a.frameHeight)})}}}}function t(){if(a.imageScale){var x=e.fn.fancybox.getViewport();var z=Math.min(Math.min(x[0]-60,b.width)/b.width,Math.min(x[1]-60,b.height)/b.height);var y=Math.round(z*b.width);var v=Math.round(z*b.height)}else{var y=b.width;var v=b.height}o('<img alt="" id="fancy_img" src="'+b.src+'" />',y,v)}function r(){if((a.itemArray.length-1)>a.itemCurrent){var v=a.itemArray[a.itemCurrent+1].href;if(v.match(d)){objNext=new Image();objNext.src=v}}if(a.itemCurrent>0){var v=a.itemArray[a.itemCurrent-1].href;if(v.match(d)){objNext=new Image();objNext.src=v}}}function o(B,x,D){h=true;var z=a.padding;if(f||i){e("#fancy_content")[0].style.removeExpression("height");e("#fancy_content")[0].style.removeExpression("width")}if(z>0){x+=z*2;D+=z*2;e("#fancy_content").css({top:z+"px",right:z+"px",bottom:z+"px",left:z+"px",width:"auto",height:"auto"});if(f||i){e("#fancy_content")[0].style.setExpression("height","(this.parentNode.clientHeight - "+z*2+")");e("#fancy_content")[0].style.setExpression("width","(this.parentNode.clientWidth - "+z*2+")")}}else{e("#fancy_content").css({top:0,right:0,bottom:0,left:0,width:"100%",height:"100%"})}if(e("#fancy_outer").is(":visible")&&x==e("#fancy_outer").width()&&D==e("#fancy_outer").height()){e("#fancy_content").fadeOut("fast",function(){e("#fancy_content").empty().append(e(B)).fadeIn("normal",function(){l()})});return}var C=e.fn.fancybox.getViewport();var y=(x+36)>C[0]?C[2]:(C[2]+Math.round((C[0]-x-36)/2));var F=(D+50)>C[1]?C[3]:(C[3]+Math.round((C[1]-D-50)/2));var E={left:y,top:F,width:x+"px",height:D+"px"};if(e("#fancy_outer").is(":visible")){e("#fancy_content").fadeOut("normal",function(){e("#fancy_content").empty();e("#fancy_outer").animate(E,a.zoomSpeedChange,a.easingChange,function(){e("#fancy_content").append(e(B)).fadeIn("normal",function(){l()})})})}else{if(a.zoomSpeedIn>0&&a.itemArray[a.itemCurrent].orig!==undefined){e("#fancy_content").empty().append(e(B));var A=a.itemArray[a.itemCurrent].orig;var v=e.fn.fancybox.getPosition(A);e("#fancy_outer").css({left:(v.left-18)+"px",top:(v.top-18)+"px",width:e(A).width(),height:e(A).height()});if(a.zoomOpacity){E.opacity="show"}e("#fancy_outer").animate(E,a.zoomSpeedIn,a.easingIn,function(){l()})}else{e("#fancy_content").hide().empty().append(e(B)).show();e("#fancy_outer").css(E).fadeIn("normal",function(){l()})}}}function s(){if(a.itemCurrent!=0){e("#fancy_left, #fancy_left_ico").unbind().bind("click",function(v){v.stopPropagation();a.itemCurrent--;q();return false});e("#fancy_left").show()}if(a.itemCurrent!=(a.itemArray.length-1)){e("#fancy_right, #fancy_right_ico").unbind().bind("click",function(v){v.stopPropagation();a.itemCurrent++;q();return false});e("#fancy_right").show()}}function l(){if(e.browser.msie){e("#fancy_content")[0].style.removeAttribute("filter");e("#fancy_outer")[0].style.removeAttribute("filter")}s();r();e(document).keydown(function(v){if(v.keyCode==27){e.fn.fancybox.close();e(document).unbind("keydown")}else{if(v.keyCode==37&&a.itemCurrent!=0){a.itemCurrent--;q();e(document).unbind("keydown")}else{if(v.keyCode==39&&a.itemCurrent!=(a.itemArray.length-1)){a.itemCurrent++;q();e(document).unbind("keydown")}}}});if(a.centerOnScroll){e(window).bind("resize scroll",e.fn.fancybox.scrollBox)}else{e("div#fancy_outer").css("position","absolute")}if(a.hideOnContentClick){e("#fancy_wrap").click(e.fn.fancybox.close)}e("#fancy_overlay, #fancy_close").bind("click",e.fn.fancybox.close);e("#fancy_close").show();if(a.itemArray[a.itemCurrent].title!==undefined&&a.itemArray[a.itemCurrent].title.length>0){e("#fancy_title div").html(a.itemArray[a.itemCurrent].title);e("#fancy_title").show()}if(a.overlayShow&&g){e("embed, object, select",e("#fancy_content")).css("visibility","visible")}if(e.isFunction(a.callbackOnShow)){a.callbackOnShow()}if(e.browser.msie){e("#fancy_outer")[0].style.removeAttribute("filter");e("#fancy_content")[0].style.removeAttribute("filter")}h=false}return this.unbind("click").click(p)};e.fn.fancybox.scrollBox=function(){var l=e.fn.fancybox.getViewport();e("#fancy_outer").css("left",((e("#fancy_outer").width()+36)>l[0]?l[2]:l[2]+Math.round((l[0]-e("#fancy_outer").width()-36)/2)));e("#fancy_outer").css("top",((e("#fancy_outer").height()+50)>l[1]?l[3]:l[3]+Math.round((l[1]-e("#fancy_outer").height()-50)/2)))};e.fn.fancybox.getNumeric=function(l,m){return parseInt(e.curCSS(l.jquery?l[0]:l,m,true))||0};e.fn.fancybox.getPosition=function(l){var m=l.offset();m.top+=e.fn.fancybox.getNumeric(l,"paddingTop");m.top+=e.fn.fancybox.getNumeric(l,"borderTopWidth");m.left+=e.fn.fancybox.getNumeric(l,"paddingLeft");m.left+=e.fn.fancybox.getNumeric(l,"borderLeftWidth");return m};e.fn.fancybox.showIframe=function(){e(".fancy_loading").hide();e("#fancy_frame").show()};e.fn.fancybox.getViewport=function(){return[e(window).width(),e(window).height(),e(document).scrollLeft(),e(document).scrollTop()]};e.fn.fancybox.animateLoading=function(){if(!e("#fancy_loading").is(":visible")){clearInterval(j);return}e("#fancy_loading > div").css("top",(k*-40)+"px");k=(k+1)%12};e.fn.fancybox.showLoading=function(){clearInterval(j);var l=e.fn.fancybox.getViewport();e("#fancy_loading").css({left:((l[0]-40)/2+l[2]),top:((l[1]-40)/2+l[3])}).show();e("#fancy_loading").bind("click",e.fn.fancybox.close);j=setInterval(e.fn.fancybox.animateLoading,66)};e.fn.fancybox.close=function(){h=true;e(b).unbind();e("#fancy_overlay, #fancy_close").unbind();if(a.hideOnContentClick){e("#fancy_wrap").unbind()}e("#fancy_close, .fancy_loading, #fancy_left, #fancy_right, #fancy_title").hide();if(a.centerOnScroll){e(window).unbind("resize scroll")}__cleanup=function(){e("#fancy_overlay, #fancy_outer").hide();if(a.centerOnScroll){e(window).unbind("resize scroll")}if(g){e("embed, object, select").css("visibility","visible")}if(e.isFunction(a.callbackOnClose)){a.callbackOnClose()}h=false};if(e("#fancy_outer").is(":visible")!==false){if(a.zoomSpeedOut>0&&a.itemArray[a.itemCurrent].orig!==undefined){var m=a.itemArray[a.itemCurrent].orig;var l=e.fn.fancybox.getPosition(m);var n={left:(l.left-18)+"px",top:(l.top-18)+"px",width:e(m).width(),height:e(m).height()};if(a.zoomOpacity){n.opacity="hide"}e("#fancy_outer").stop(false,true).animate(n,a.zoomSpeedOut,a.easingOut,__cleanup)}else{e("#fancy_outer").stop(false,true).fadeOut("fast",__cleanup)}}else{__cleanup()}return false};e.fn.fancybox.build=function(){var l="";l+='<div id="fancy_overlay"></div>';l+='<div id="fancy_wrap">';l+='<div class="fancy_loading" id="fancy_loading"><div id="fancy_loading_spinner"></div></div>';l+='<div id="fancy_outer">';l+='<div id="fancy_inner">';l+='<div id="fancy_close"></div>';l+='<div id="fancy_bg"><div class="fancy_bg fancy_bg_n"></div><div class="fancy_bg fancy_bg_ne"></div><div class="fancy_bg fancy_bg_e"></div><div class="fancy_bg fancy_bg_se"></div><div class="fancy_bg fancy_bg_s"></div><div class="fancy_bg fancy_bg_sw"></div><div class="fancy_bg fancy_bg_w"></div><div class="fancy_bg fancy_bg_nw"></div></div>';l+='<a href="javascript:;" id="fancy_left"><span class="fancy_ico" id="fancy_left_ico"></span></a><a href="javascript:;" id="fancy_right"><span class="fancy_ico" id="fancy_right_ico"></span></a>';l+='<div id="fancy_content"></div>';l+='<div id="fancy_title"></div>';l+="</div>";l+="</div>";l+="</div>";e(l).appendTo("body");e('<table cellspacing="0" cellpadding="0" border="0"><tr><td class="fancy_title" id="fancy_title_left"></td><td class="fancy_title" id="fancy_title_main"><div></div></td><td class="fancy_title" id="fancy_title_right"></td></tr></table>').appendTo("#fancy_title");if(e.browser.msie){e(".fancy_bg").fixPNG()}if(g){e("div#fancy_overlay").css("position","absolute");e("#fancy_loading div, #fancy_close, .fancy_title, .fancy_ico").fixPNG();e("#fancy_inner").prepend('<iframe id="fancy_bigIframe" src="javascript:false;" scrolling="no" frameborder="0"></iframe>');var m=e("#fancy_bigIframe")[0].contentWindow.document;m.open();m.close()}};e.fn.fancybox.defaults={padding:10,imageScale:true,zoomOpacity:false,zoomSpeedIn:0,zoomSpeedOut:0,zoomSpeedChange:300,easingIn:"swing",easingOut:"swing",easingChange:"swing",frameWidth:425,frameHeight:355,overlayShow:true,overlayOpacity:0.3,hideOnContentClick:true,centerOnScroll:true,itemArray:[],callbackOnStart:null,callbackOnShow:null,callbackOnClose:null};e(document).ready(function(){e.fn.fancybox.build()})})(jQuery);