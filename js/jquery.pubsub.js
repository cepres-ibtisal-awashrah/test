(function(d){var c={};var b=-1;var a=function(h,f,g){if(typeof h=="object"){d.each(h,function(j,i){g(j,i)})}else{var e=h.split(/,\s*/);d.each(e,function(i,j){g(j,f)})}};d.publish=function(f,e){a(f,e,function(g,h){if(!c[g]){return false}d.each(c[g],function(i,j){j.handler(h)})})};d.subscribe=function(g,e,f){if(!e){e=++b}a(g,f,function(h,i){if(!c[h]){c[h]={}}c[h][e]={token:e,handler:i}});return e};d.unsubscribe=function(f,e){a(f,null,function(g){if(!f[g]||!f[g][e]){return false}delete f[g][e]})}})(jQuery);