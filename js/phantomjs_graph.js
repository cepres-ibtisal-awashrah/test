var page=require("webpage").create(),system=require("system");if(system.args.length!=6){console.log("Invalid arguments");phantom.exit(1)}var address=system.args[1],chartConfig=JSON.parse(atob(system.args[2])),width=parseInt(system.args[3]),height=parseInt(system.args[4]);baseurl=system.args[5];page.paperSize={format:"A4",orientation:"portrait",margin:"50px",padding:"50px"};page.clipRect={top:8,left:8,width:width,height:height};page.onCallback=function(){return JSON.stringify({baseurl:baseurl,config:chartConfig})};page.open(address,function(a){if(a!=="success"){console.log("Unable to load the address!");phantom.exit(1)}window.setTimeout(function(){console.log(page.renderBase64("PNG"));phantom.exit()},3000)});